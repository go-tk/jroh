// Code generated by jrohc. DO NOT EDIT.

package fooapi

import (
	context "context"
	apicommon "github.com/go-tk/jroh/go/apicommon"
	http "net/http"
)

type TestServer interface {
	DoSomething(ctx context.Context, params *DoSomethingParams) (err error)
	DoSomething2(ctx context.Context, params *DoSomething2Params, results *DoSomething2Results) (err error)
	DoSomething3(ctx context.Context) (err error)
}

func RegisterTestServer(server TestServer, serveMux *http.ServeMux, serverOptions apicommon.ServerOptions) {
	serverOptions.Sanitize()
	var middlewareTable [3][]apicommon.Middleware
	apicommon.FillMiddlewareTable(middlewareTable[:], serverOptions.Middlewares)
	var rpcInterceptorTable [3][]apicommon.RPCHandler
	apicommon.FillRPCInterceptorTable(rpcInterceptorTable[:], serverOptions.RPCInterceptors)
	{
		middlewares := middlewareTable[Test_DoSomething]
		rpcInterceptors := rpcInterceptorTable[Test_DoSomething]
		incomingRPCFactory := func() *apicommon.IncomingRPC {
			var s struct {
				IncomingRPC apicommon.IncomingRPC
				Params      DoSomethingParams
			}
			rpcHandler := func(ctx context.Context, rpc *apicommon.RPC) error {
				return server.DoSomething(ctx, rpc.Params().(*DoSomethingParams))
			}
			s.IncomingRPC.Init("Foo", "Test", "DoSomething", &s.Params, nil, rpcHandler, rpcInterceptors)
			return &s.IncomingRPC
		}
		handler := apicommon.MakeHandler(middlewares, incomingRPCFactory, serverOptions.TraceIDGenerator)
		serveMux.Handle("/rpc/Foo.Test.DoSomething", handler)
	}
	{
		middlewares := middlewareTable[Test_DoSomething2]
		rpcInterceptors := rpcInterceptorTable[Test_DoSomething2]
		incomingRPCFactory := func() *apicommon.IncomingRPC {
			var s struct {
				IncomingRPC apicommon.IncomingRPC
				Params      DoSomething2Params
				Results     DoSomething2Results
			}
			rpcHandler := func(ctx context.Context, rpc *apicommon.RPC) error {
				return server.DoSomething2(ctx, rpc.Params().(*DoSomething2Params), rpc.Results().(*DoSomething2Results))
			}
			s.IncomingRPC.Init("Foo", "Test", "DoSomething2", &s.Params, &s.Results, rpcHandler, rpcInterceptors)
			return &s.IncomingRPC
		}
		handler := apicommon.MakeHandler(middlewares, incomingRPCFactory, serverOptions.TraceIDGenerator)
		serveMux.Handle("/rpc/Foo.Test.DoSomething2", handler)
	}
	{
		middlewares := middlewareTable[Test_DoSomething3]
		rpcInterceptors := rpcInterceptorTable[Test_DoSomething3]
		incomingRPCFactory := func() *apicommon.IncomingRPC {
			var s struct {
				IncomingRPC apicommon.IncomingRPC
			}
			rpcHandler := func(ctx context.Context, rpc *apicommon.RPC) error {
				return server.DoSomething3(ctx)
			}
			s.IncomingRPC.Init("Foo", "Test", "DoSomething3", nil, nil, rpcHandler, rpcInterceptors)
			return &s.IncomingRPC
		}
		handler := apicommon.MakeHandler(middlewares, incomingRPCFactory, serverOptions.TraceIDGenerator)
		serveMux.Handle("/rpc/Foo.Test.DoSomething3", handler)
	}
}

type TestServerFuncs struct {
	DoSomethingFunc  func(context.Context, *DoSomethingParams) error
	DoSomething2Func func(context.Context, *DoSomething2Params, *DoSomething2Results) error
	DoSomething3Func func(context.Context) error
}

var _ TestServer = (*TestServerFuncs)(nil)

func (sf *TestServerFuncs) DoSomething(ctx context.Context, params *DoSomethingParams) error {
	if f := sf.DoSomethingFunc; f != nil {
		return f(ctx, params)
	}
	return nil
}

func (sf *TestServerFuncs) DoSomething2(ctx context.Context, params *DoSomething2Params, results *DoSomething2Results) error {
	if f := sf.DoSomething2Func; f != nil {
		return f(ctx, params, results)
	}
	return nil
}

func (sf *TestServerFuncs) DoSomething3(ctx context.Context) error {
	if f := sf.DoSomething3Func; f != nil {
		return f(ctx)
	}
	return nil
}
