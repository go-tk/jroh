// Code generated by jrohc. DO NOT EDIT.

package petstoreapi

import (
	context "context"
	fmt "fmt"
	apicommon "github.com/go-tk/jroh/go/apicommon"
	http "net/http"
)

type PetClient interface {
	AddPet(ctx context.Context, params *AddPetParams) (err error)
	GetPet(ctx context.Context, params *GetPetParams) (results *GetPetResults, err error)
	GetPets(ctx context.Context, params *GetPetsParams) (results *GetPetsResults, err error)
	UpdatePet(ctx context.Context, params *UpdatePetParams) (err error)
	FindPets(ctx context.Context, params *FindPetsParams) (results *FindPetsResults, err error)
}

type petClient struct {
	apicommon.Client

	rpcFiltersTable [5][]apicommon.RPCHandler
	transportTable  [5]http.RoundTripper
}

func NewPetClient(rpcBaseURL string, options apicommon.ClientOptions) PetClient {
	options.Sanitize()
	var c petClient
	c.Init(rpcBaseURL, options.Timeout)
	apicommon.FillRPCFiltersTable(c.rpcFiltersTable[:], options.RPCFilters)
	apicommon.FillTransportTable(c.transportTable[:], options.Transport, options.Middlewares)
	return &c
}

func (c *petClient) AddPet(ctx context.Context, params *AddPetParams) error {
	var s struct {
		OutgoingRPC apicommon.OutgoingRPC
		Params      AddPetParams
	}
	s.Params = *params
	rpcFilters := c.rpcFiltersTable[Pet_AddPet]
	s.OutgoingRPC.Init("Petstore", "Pet", "AddPet", "Petstore.Pet.AddPet", &s.Params, nil, apicommon.HandleRPC, rpcFilters)
	transport := c.transportTable[Pet_AddPet]
	if err := c.DoRPC(ctx, &s.OutgoingRPC, transport, "/rpc/Petstore.Pet.AddPet"); err != nil {
		return fmt.Errorf("rpc failed; fullMethodName=\"Petstore.Pet.AddPet\" traceID=%q: %w",
			s.OutgoingRPC.TraceID(), err)
	}
	return nil
}

func (c *petClient) GetPet(ctx context.Context, params *GetPetParams) (*GetPetResults, error) {
	var s struct {
		OutgoingRPC apicommon.OutgoingRPC
		Params      GetPetParams
		Results     GetPetResults
	}
	s.Params = *params
	rpcFilters := c.rpcFiltersTable[Pet_GetPet]
	s.OutgoingRPC.Init("Petstore", "Pet", "GetPet", "Petstore.Pet.GetPet", &s.Params, &s.Results, apicommon.HandleRPC, rpcFilters)
	transport := c.transportTable[Pet_GetPet]
	if err := c.DoRPC(ctx, &s.OutgoingRPC, transport, "/rpc/Petstore.Pet.GetPet"); err != nil {
		return nil, fmt.Errorf("rpc failed; fullMethodName=\"Petstore.Pet.GetPet\" traceID=%q: %w",
			s.OutgoingRPC.TraceID(), err)
	}
	return &s.Results, nil
}

func (c *petClient) GetPets(ctx context.Context, params *GetPetsParams) (*GetPetsResults, error) {
	var s struct {
		OutgoingRPC apicommon.OutgoingRPC
		Params      GetPetsParams
		Results     GetPetsResults
	}
	s.Params = *params
	rpcFilters := c.rpcFiltersTable[Pet_GetPets]
	s.OutgoingRPC.Init("Petstore", "Pet", "GetPets", "Petstore.Pet.GetPets", &s.Params, &s.Results, apicommon.HandleRPC, rpcFilters)
	transport := c.transportTable[Pet_GetPets]
	if err := c.DoRPC(ctx, &s.OutgoingRPC, transport, "/rpc/Petstore.Pet.GetPets"); err != nil {
		return nil, fmt.Errorf("rpc failed; fullMethodName=\"Petstore.Pet.GetPets\" traceID=%q: %w",
			s.OutgoingRPC.TraceID(), err)
	}
	return &s.Results, nil
}

func (c *petClient) UpdatePet(ctx context.Context, params *UpdatePetParams) error {
	var s struct {
		OutgoingRPC apicommon.OutgoingRPC
		Params      UpdatePetParams
	}
	s.Params = *params
	rpcFilters := c.rpcFiltersTable[Pet_UpdatePet]
	s.OutgoingRPC.Init("Petstore", "Pet", "UpdatePet", "Petstore.Pet.UpdatePet", &s.Params, nil, apicommon.HandleRPC, rpcFilters)
	transport := c.transportTable[Pet_UpdatePet]
	if err := c.DoRPC(ctx, &s.OutgoingRPC, transport, "/rpc/Petstore.Pet.UpdatePet"); err != nil {
		return fmt.Errorf("rpc failed; fullMethodName=\"Petstore.Pet.UpdatePet\" traceID=%q: %w",
			s.OutgoingRPC.TraceID(), err)
	}
	return nil
}

func (c *petClient) FindPets(ctx context.Context, params *FindPetsParams) (*FindPetsResults, error) {
	var s struct {
		OutgoingRPC apicommon.OutgoingRPC
		Params      FindPetsParams
		Results     FindPetsResults
	}
	s.Params = *params
	rpcFilters := c.rpcFiltersTable[Pet_FindPets]
	s.OutgoingRPC.Init("Petstore", "Pet", "FindPets", "Petstore.Pet.FindPets", &s.Params, &s.Results, apicommon.HandleRPC, rpcFilters)
	transport := c.transportTable[Pet_FindPets]
	if err := c.DoRPC(ctx, &s.OutgoingRPC, transport, "/rpc/Petstore.Pet.FindPets"); err != nil {
		return nil, fmt.Errorf("rpc failed; fullMethodName=\"Petstore.Pet.FindPets\" traceID=%q: %w",
			s.OutgoingRPC.TraceID(), err)
	}
	return &s.Results, nil
}

type PetClientFuncs struct {
	AddPetFunc    func(context.Context, *AddPetParams) error
	GetPetFunc    func(context.Context, *GetPetParams) (*GetPetResults, error)
	GetPetsFunc   func(context.Context, *GetPetsParams) (*GetPetsResults, error)
	UpdatePetFunc func(context.Context, *UpdatePetParams) error
	FindPetsFunc  func(context.Context, *FindPetsParams) (*FindPetsResults, error)
}

var _ PetClient = (*PetClientFuncs)(nil)

func (cf *PetClientFuncs) AddPet(ctx context.Context, params *AddPetParams) error {
	f := cf.AddPetFunc
	if f == nil {
		return apicommon.ErrNotImplemented
	}
	return f(ctx, params)
}

func (cf *PetClientFuncs) GetPet(ctx context.Context, params *GetPetParams) (*GetPetResults, error) {
	f := cf.GetPetFunc
	if f == nil {
		return nil, apicommon.ErrNotImplemented
	}
	return f(ctx, params)
}

func (cf *PetClientFuncs) GetPets(ctx context.Context, params *GetPetsParams) (*GetPetsResults, error) {
	f := cf.GetPetsFunc
	if f == nil {
		return nil, apicommon.ErrNotImplemented
	}
	return f(ctx, params)
}

func (cf *PetClientFuncs) UpdatePet(ctx context.Context, params *UpdatePetParams) error {
	f := cf.UpdatePetFunc
	if f == nil {
		return apicommon.ErrNotImplemented
	}
	return f(ctx, params)
}

func (cf *PetClientFuncs) FindPets(ctx context.Context, params *FindPetsParams) (*FindPetsResults, error) {
	f := cf.FindPetsFunc
	if f == nil {
		return nil, apicommon.ErrNotImplemented
	}
	return f(ctx, params)
}
